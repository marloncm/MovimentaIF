<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovimentaIF - Painel do Professor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Academic Green & Neutral Gray -->
    <!-- Application Structure Plan: A classic admin dashboard layout with a fixed sidebar for navigation and a main content area. This SPA (Single Page Application) approach uses JavaScript to toggle the visibility of different content sections ('views') without page reloads. This is highly efficient for a management tool, providing a fast and seamless experience for the professor. The main views are Dashboard, Students, Workouts, and Schedule, directly reflecting the core functionalities mentioned in the TCC. Modals will be used for forms like 'Add Student' to keep the user within the same context. -->
    <!-- Visualization & Content Choices: Report Info: Need to manage students, workouts, and schedules. Goal: Provide an overview and management tools. Viz/Presentation Method: The dashboard uses stat cards for quick metrics (total students, pending PAR-Qs) and a bar chart (via Chart.js) to visualize weekly activity. Student management uses a searchable HTML table for clear, organized data presentation. Interactions: Sidebar navigation, form modals for data entry, search/filter for the student list. Justification: This combination of visualizations and interactive elements is standard for dashboards because it's intuitive and effectively separates high-level summaries from detailed management tasks. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        .view {
            display: none;
        }

        .view.active {
            display: block;
        }
    </style>
</head>

<body class="bg-slate-50 font-sans">

    <div class="flex h-screen bg-slate-100">
        <!-- Sidebar -->
        <aside class="w-64 bg-white shadow-md flex-shrink-0">
            <div class="p-6 border-b">
                <h1 class="text-2xl font-bold text-slate-800">MovimentaIF</h1>
            </div>
            <nav class="p-4">
                <a href="#dashboard"
                    class="nav-link flex items-center p-3 text-slate-700 bg-emerald-50 rounded-lg font-semibold">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                        </path>
                    </svg>
                    Início
                </a>
                <a href="students.html"
                    class="nav-link flex items-center p-3 text-slate-600 hover:bg-slate-50 rounded-lg mt-2">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z">
                        </path>
                    </svg>
                    Alunos
                </a>
                <a href="workouts.html"
                    class="nav-link flex items-center p-3 text-slate-600 hover:bg-slate-50 rounded-lg mt-2">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16v4m-2-2h4m5 10v4m-2-2h4M5 3a2 2 0 00-2 2v1m16 0V5a2 2 0 00-2-2h-1m-4 16l-3-3m0 0l-3 3m3-3v-6m0 6h.01M7 11h10M5 17a2 2 0 002 2h1m-4-16a2 2 0 012-2h1m4 16a2 2 0 002-2v-1m-4 4l3 3m0 0l3-3m-3 3v-6m0 6h-.01M17 11H7">
                        </path>
                    </svg>
                    Treinos
                </a>
                <a href="#agenda"
                    class="nav-link flex items-center p-3 text-slate-600 hover:bg-slate-50 rounded-lg mt-2">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                        </path>
                    </svg>
                    Agenda
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white shadow-sm p-4 flex justify-between items-center">
                <h2 class="text-xl font-semibold text-slate-700" id="header-title">Painel</h2>
                <div class="flex items-center">
                    <span id="user-email" class="text-slate-600 mr-4"></span>
                    <button id="logout-btn"
                        class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition">Sair</button>
                </div>
            </header>

            <!-- Content Area -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-slate-50 p-6">

                <!-- Dashboard View -->
                <div id="dashboard-view" class="view active">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-slate-500 text-sm font-medium">Total de Alunos</h3>
                            <p class="text-3xl font-bold text-slate-800 mt-1">42</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-slate-500 text-sm font-medium">Agendamentos Hoje</h3>
                            <p class="text-3xl font-bold text-slate-800 mt-1">8</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-slate-500 text-sm font-medium">PAR-Q Pendentes</h3>
                            <p class="text-3xl font-bold text-orange-500 mt-1">3</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-slate-500 text-sm font-medium">Ocupação Atual</h3>
                            <p class="text-3xl font-bold text-emerald-600 mt-1">65%</p>
                        </div>
                    </div>
                    <div class="mt-8 bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-slate-800 mb-4">Uso da Academia na Semana</h3>
                        <div class="chart-container" style="position: relative; height:40vh; width:100%">
                            <canvas id="weekly-usage-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Agenda View -->
                <div id="agenda-view" class="view">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold text-slate-800">Em desenvolvimento...</h3>
                        <p class="text-slate-600 mt-2">A seção para visualização da agenda será implementada aqui.</p>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSy...YOUR_API_KEY",
            authDomain: "your-project-id.firebaseapp.com",
            projectId: "your-project-id",
            storageBucket: "your-project-id.appspot.com",
            messagingSenderId: "your-sender-id",
            appId: "1:your-sender-id:web:your-app-id"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const userEmailSpan = document.getElementById('user-email');
        const logoutBtn = document.getElementById('logout-btn');

        // onAuthStateChanged(auth, user => {
        //     if (user) {
        //         userEmailSpan.textContent = user.email;
        //         if (window.location.href.includes('index.html')) {
        //             window.location.href = 'dashboard.html';
        //         }
        //     } else {
        //         window.location.replace('index.html');
        //     }
        // });

        logoutBtn.addEventListener('click', () => {
            signOut(auth).then(() => {
                console.log("Logout bem-sucedido.");
            }).catch((error) => {
                console.error("Erro no logout:", error);
            });
        });

        const navLinks = document.querySelectorAll('.nav-link');
        const views = document.querySelectorAll('.view');
        const headerTitle = document.getElementById('header-title');

        function updateView(hash) {
            const targetView = document.querySelector(hash + '-view');

            views.forEach(view => view.classList.remove('active'));
            if (targetView) targetView.classList.add('active');

            navLinks.forEach(link => {
                link.classList.remove('bg-emerald-50', 'text-slate-700', 'font-semibold');
                link.classList.add('text-slate-600');
                if (link.getAttribute('href') === hash) {
                    link.classList.add('bg-emerald-50', 'text-slate-700', 'font-semibold');
                    headerTitle.textContent = link.textContent.trim();
                }
            });
        }

        window.addEventListener('hashchange', () => updateView(window.location.hash || '#dashboard'));

        updateView(window.location.hash || '#dashboard');

        const ctx = document.getElementById('weekly-usage-chart').getContext('2d');
        const weeklyUsageChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
                datasets: [{
                    label: 'Alunos Presentes',
                    data: [12, 19, 15, 22, 18, 10],
                    backgroundColor: 'rgba(16, 185, 129, 0.6)',
                    borderColor: 'rgba(16, 185, 129, 1)',
                    borderWidth: 1,
                    borderRadius: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    </script>
</body>

</html>